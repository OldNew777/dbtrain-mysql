CREATE DATABASE THU;
USE THU;
CREATE TABLE ORDERS (
    O_ORDERKEY        INT,
    O_CUSTKEY         INT NOT NULL,
    O_ORDERSTATUS     VARCHAR(1),
    O_TOTALPRICE      FLOAT,
    O_ORDERDATE       DATE,
    O_ORDERPRIORITY   VARCHAR(15),
    O_CLERK           VARCHAR(15),
    O_SHIPPRIORITY    INT,
    O_COMMENT         VARCHAR(79)
);


CREATE TABLE LINEITEM (
    L_ORDERKEY        INT NOT NULL,
    L_PARTKEY         INT NOT NULL,
    L_SUPPKEY         INT NOT NULL,
    L_LINENUMBER      INT,
    L_QUANTITY        FLOAT,
    L_EXTENDEDPRICE   FLOAT,
    L_DISCOUNT        FLOAT,
    L_TAX             FLOAT,
    L_RETURNFLAG      VARCHAR(1),
    L_LINESTATUS      VARCHAR(1),
    L_SHIPDATE        DATE,
    L_COMMITDATE      DATE,
    L_RECEIPTDATE     DATE,
    L_SHIPINSTRUCT    VARCHAR(25),
    L_SHIPMODE        VARCHAR(10),
    L_COMMENT         VARCHAR(44),
    PRIMARY KEY (L_ORDERKEY, L_LINENUMBER),
    FOREIGN KEY (L_ORDERKEY) REFERENCES ORDERS(O_ORDERKEY),
    FOREIGN KEY (L_PARTKEY,L_SUPPKEY) REFERENCES PARTSUPP(PS_PARTKEY,PS_SUPPKEY)
);
-- DESC NATION;
-- DESC REGION;
-- DESC SUPPLIER;
-- DESC CUSTOMER;
-- DESC PART;
-- DESC PARTSUPP;
-- DESC ORDERS;
-- DESC LINEITEM;
-- DESC SHADOW NATION;
-- DESC SHADOW REGION;
-- DESC SHADOW SUPPLIER;
-- DESC SHADOW CUSTOMER;
-- DESC SHADOW PART;
-- DESC SHADOW PARTSUPP;
-- DESC SHADOW ORDERS;
-- DESC SHADOW LINEITEM;
LOAD FROM FILE '../data-with-date/region.csv' TO TABLE REGION;
LOAD FROM FILE '../data-with-date/nation.csv' TO TABLE NATION;
LOAD FROM FILE '../data-with-date/supplier.csv' TO TABLE SUPPLIER;
LOAD FROM FILE '../data-with-date/part.csv' TO TABLE PART;
LOAD FROM FILE '../data-with-date/partsupp.csv' TO TABLE PARTSUPP;
-- LOAD FROM FILE '../data-with-date/customer.csv' TO TABLE CUSTOMER;
-- LOAD FROM FILE '../data-with-date/orders.csv' TO TABLE ORDERS;
-- LOAD FROM FILE '../data-with-date/lineitem.csv' TO TABLE LINEITEM;
DESC ORDERS;
-- LOAD FROM FILE '../data-with-date/orders.csv' TO TABLE ORDERS;

-- ALTER TABLE ORDERS ADD INDEX (O_ORDERDATE);
